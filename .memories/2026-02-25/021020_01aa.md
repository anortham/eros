---
id: checkpoint_01aaa181
timestamp: 2026-02-25T02:10:20.317Z
tags:
  - eros
  - review
  - performance
  - embedding
  - salvageability
git:
  branch: main
  commit: ca188f4
summary: "## Reviewed Eros codebase for salvageability and embedding performance"
planId: add-file-logging-timing-instrumentation-to-eros
type: checkpoint
confidence: 4
---

## Reviewed Eros codebase for salvageability and embedding performance

- **WHAT:** Completed a full read-through of core modules and tests to assess whether the project is worth continuing and to identify concrete causes of slow indexing/embedding.
- **WHY:** User reported frustration with embedding speed and asked if the project is salvageable.
- **HOW:** Inspected `embeddings.py`, `retrieval.py`, `storage.py`, `lifecycle.py`, `chunking.py`, `julie_reader.py`, `server.py`, and test suite under `python/tests/`.

### Key findings
- **Strong foundation:** Clean module boundaries, meaningful tests, and proper lazy init via background task (`lifecycle.py`) are solid and reusable.
- **Main performance drag:** Index build re-embeds everything each run and `refresh` is effectively full re-index without dedupe/upsert logic.
- **Scalability issues:** One-chunk-per-symbol with body text and no top-level filtering can explode chunk counts; all file contents are loaded in memory per workspace.
- **Operational issue:** Default device is `cpu`, so out-of-the-box indexing will feel slow on Apple Silicon/CUDA unless user sets `EROS_DEVICE=auto`.
- **Additional concerns:** dynamic SQL WHERE string interpolation and duplicate growth risk in vector tables.

### Impact
- Prepared a concrete salvageability verdict and prioritized fix roadmap (quick wins + structural fixes) for user response.

