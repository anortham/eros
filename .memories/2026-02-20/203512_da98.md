---
id: checkpoint_da986ba0
timestamp: 2026-02-20T20:35:12.150Z
tags:
  - eros
  - logging
  - timing
  - instrumentation
  - complete
git:
  branch: main
  commit: ce7296a
  files:
    - .julie/.gitignore
    - .memories/.active-plan
    - .memories/2026-02-20/201733_a7d4.md
    - .memories/2026-02-20/202020_cc86.md
    - .memories/2026-02-20/202648_a806.md
    - .memories/plans/add-file-logging-timing-instrumentation-to-eros.md
    - python/eros/config.py
    - python/eros/embeddings.py
    - python/eros/retrieval.py
    - python/eros/server.py
    - python/tests/test_embeddings.py
    - python/tests/test_logging.py
    - python/tests/test_retrieval.py
summary: "## Added File Logging + Timing Instrumentation to Eros"
---

## Added File Logging + Timing Instrumentation to Eros

All 4 steps complete. TDD throughout — 91 tests passing, lint clean.

### What changed:
- **config.py:** Added `logs_dir` property → `.eros/logs/`
- **server.py:** Replaced `basicConfig()` with `_setup_logging()` — console (INFO) + `RotatingFileHandler` (DEBUG, 5MB, 3 backups) writing to `.eros/logs/eros.log`
- **embeddings.py:** `_ModelSlot.load()` logs model load time at INFO; `.encode()` logs throughput (texts/sec) at DEBUG
- **retrieval.py:** `_build_index()` output now includes total time, per-workspace time, and doc embedding time in brackets

### Expected output format:
```
Indexed 5840 code chunks in 14.2s:
  eros (Primary): 297 chunks [1.1s]
  coa-codesearch-mcp (Reference): 5543 chunks [12.8s]
Indexed 30 doc chunks from 3 root files [0.3s]
```

### Key constraints met:
- retrieval.py stayed at 499 lines (limit 500)
- All new files under 300 lines
- No new dependencies
