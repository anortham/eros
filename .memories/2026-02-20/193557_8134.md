---
id: checkpoint_8134465b
timestamp: 2026-02-20T19:35:57.149Z
tags:
  - eros
  - fastmcp
  - tool-output
  - fix
git:
  branch: main
  commit: fb64f39
  files:
    - .julie/.gitignore
summary: "## Fixed JSON-wrapped tool output"
---

## Fixed JSON-wrapped tool output

### What
All 4 Eros tools were returning `{"result":"..."}` JSON instead of clean text.

### Why
FastMCP auto-generates `output_schema` with `x-fastmcp-wrap-result: True` for `-> str` returns, which forces `structured_content: {"result": "..."}`. Claude Code displays the structured content as JSON with escaped newlines.

### How
Set `output_schema=None` on all 4 `@mcp.tool()` decorators. This makes FastMCP return only `TextContent` (clean text) without the `structured_content` wrapper.

### Key discovery
- FastMCP `FunctionTool.convert_result()` checks `x-fastmcp-wrap-result` in output_schema
- When present, it wraps the result in `{"result": value}` as structured_content
- Setting `output_schema=None` bypasses this entirely
